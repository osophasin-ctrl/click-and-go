<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Click & Go – เปรียบเทียบราคาโรงแรม จองง่าย</title>
  <meta name="description" content="ค้นหาและเปรียบเทียบราคาโรงแรมแบบเรียลไทม์จากหลายผู้ให้บริการ พร้อมลิงก์จองทันที ใช้งานง่ายทั้งมือถือและคอมพิวเตอร์" />
  <link rel="canonical" href="https://clickandgo.asia/index.html" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Click & Go" />
  <meta property="og:title" content="Click & Go – เปรียบเทียบราคาโรงแรม จองง่าย" />
  <meta property="og:description" content="ค้นหาและเปรียบเทียบราคาโรงแรมแบบเรียลไทม์จากหลายผู้ให้บริการ พร้อมลิงก์จองทันที" />
  <meta property="og:url" content="https://clickandgo.asia/index.html" />
  <meta property="og:image" content="https://clickandgo.asia/hero-bg.jpg" />

  <link rel="icon" href="/favicon.ico">
  <link rel="stylesheet" href="/style.css">

  <!-- Flatpickr -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/material_green.css">

  <style>
    /* ====== เสริมสไตล์สำหรับกล่องแนะนำ ====== */
    .suggest-wrap { position: relative; }
    .suggest-panel {
      position: absolute; left: 0; right: 0; top: 100%;
      background: #fff; border: 1px solid #e5e7eb; border-top: none;
      border-radius: 0 0 .5rem .5rem; max-height: 300px; overflow: auto;
      box-shadow: 0 8px 24px rgba(0,0,0,.08); z-index: 30; display: none;
    }
    .suggest-item {
      padding: .75rem .9rem; cursor: pointer; line-height: 1.4;
      display: grid; grid-template-columns: 1fr auto; gap: .5rem;
    }
    .suggest-item:hover { background: #f3f4f6; }
    .suggest-title { font-weight: 600; }
    .suggest-sub { font-size: .9rem; color: #6b7280; }
    .hidden { display: none !important; }

    /* ปุ่มผู้เข้าพักให้หน้าตาเหมือน input */
    .guest-input {
      width: 100%; padding: .9rem 1rem; border-radius: .5rem;
      border: 1px solid #e5e7eb; text-align: left; background: #fff;
    }

    /* โมดัลผู้เข้าพักแบบง่าย */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;z-index:40}
    .modal{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);background:#fff;border-radius:.75rem;width:min(520px,92vw);display:none;z-index:50}
    .modal-header{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid #eee}
    .modal-body{padding:12px 16px 16px}
    .row{display:flex;justify-content:space-between;align-items:center;padding:10px 0}
    .counter{display:flex;gap:12px;align-items:center}
    .btn{padding:.55rem .9rem;border-radius:.5rem;border:1px solid #e5e7eb;background:#fff;cursor:pointer}
    .btn-prim{background:#10b981;color:#fff;border-color:#10b981}
  </style>
</head>
<body>
  <!-- Header -->
  <header class="site-header" role="banner">
    <div class="inner">
      <a href="/index.html" class="brand" aria-label="Click & Go">
        <img src="/logo.png" alt="Click & Go" width="40" height="40" loading="lazy" />
        <span class="brand-text" aria-hidden="true">Click & Go</span>
      </a>

      <nav class="main-nav" aria-label="เมนูหลัก">
        <a href="/index.html" aria-current="page">หน้าแรก</a>
        <a href="/deals.html">โปรโมชั่น</a>
        <div class="lang">
          <button class="lang-btn" aria-haspopup="true" aria-expanded="false">ภาษา ▾</button>
          <div class="lang-menu" role="menu">
            <a role="menuitem" href="#" aria-current="true">ไทย</a>
            <a role="menuitem" href="/en/index.html">English</a>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- Hero -->
    <section class="hero" aria-label="ภาพแบนเนอร์">
      <img class="hero-img" src="/hero-bg.jpg" alt="Click & Go" />
    </section>

    <!-- Search Box -->
    <section style="margin:24px 0">
      <h2 class="section-title">ค้นหาโรงแรม</h2>
      <div class="mock-wrap">
        <div class="mock-box">
          <h3 class="mock-title">ค้นหาดีลที่ใช่สำหรับคุณ</h3>
          <p class="mock-sub">พิมพ์ชื่อเมืองหรือโรงแรม เลือกวันที่ ระบุผู้เข้าพัก แล้วกดค้นหา</p>

          <form id="cgForm" class="mock-row" method="GET" action="/search.html" autocomplete="off">
            <div class="suggest-wrap full-row">
              <input type="text" id="dest" class="mock-input" placeholder="เช่น กรุงเทพ, เชียงใหม่ หรือชื่อโรงแรม" aria-label="ปลายทาง" />
              <div id="suggestPanel" class="suggest-panel" role="listbox" aria-label="ตัวเลือกแนะนำ"></div>
            </div>

            <div class="field has-label">
              <span class="field-label">เช็คอิน</span>
              <input type="text" id="ci" class="mock-input" aria-label="เช็คอิน" readonly>
            </div>
            <div class="field has-label">
              <span class="field-label">เช็คเอาท์</span>
              <input type="text" id="co" class="mock-input" aria-label="เช็คเอาท์" readonly>
            </div>

            <button type="button" id="guestBtn" class="guest-input full-row">1 ห้อง, 2 ผู้ใหญ่, 0 เด็ก</button>
            <button type="submit" class="mock-btn btn-wide full-row">ค้นหา</button>

            <!-- ส่งค่าพารามิเตอร์ -->
            <input type="hidden" id="rooms" name="rooms" value="1">
            <input type="hidden" id="adults" name="adults" value="2">
            <input type="hidden" id="children" name="children" value="0">
            <input type="hidden" id="cityId" name="cityId" value="">
            <input type="hidden" name="lang" value="th-th">
          </form>
        </div>
      </div>
    </section>

    <!-- Top destinations in Thailand -->
    <section>
      <h2 class="section-title">ปลายทางยอดนิยมในไทย</h2>
      <div class="city-grid">
        <a class="city-card" href="/bangkok.html"><figure><img src="/bangkok-tile.webp" alt="กรุงเทพ"><figcaption>กรุงเทพฯ</figcaption></figure></a>
        <a class="city-card" href="/chiangmai.html"><figure><img src="/chiangmai-tile.webp" alt="เชียงใหม่"><figcaption>เชียงใหม่</figcaption></figure></a>
        <a class="city-card" href="/pattaya.html"><figure><img src="/pattaya-tile.webp" alt="พัทยา"><figcaption>พัทยา</figcaption></figure></a>
        <a class="city-card" href="/phuket.html"><figure><img src="/phuket-tile.webp" alt="ภูเก็ต"><figcaption>ภูเก็ต</figcaption></figure></a>
        <a class="city-card" href="/krabi.html"><figure><img src="/krabi-tile.webp" alt="กระบี่"><figcaption>กระบี่</figcaption></figure></a>
        <a class="city-card" href="/hua-hin.html"><figure><img src="/huahin-tile.webp" alt="หัวหิน"><figcaption>หัวหิน</figcaption></figure></a>
      </div>
    </section>

    <!-- Why choose -->
    <section>
      <h2 class="section-title">ทำไมต้อง Click & Go</h2>
      <div class="features">
        <div class="feature"><h3>ดีลดีที่สุด</h3><p>เชื่อมต่อผู้ให้บริการระดับโลก แสดงราคาจริงแบบเรียลไทม์</p></div>
        <div class="feature"><h3>จองง่าย</h3><p>คลิกไปหน้าจองของพาร์ทเนอร์ได้ทันที</p></div>
        <div class="feature"><h3>ใช้งานได้ทุกที่</h3><p>รองรับมือถือ แท็บเล็ต และคอมพิวเตอร์</p></div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container" style="text-align:center">
      <div class="footer-links">
        <a href="/privacy.html">นโยบายความเป็นส่วนตัว</a> ·
        <a href="/terms.html">เงื่อนไขการใช้งาน</a> ·
        <a href="/affiliate.html">ข้อกำหนดพาร์ทเนอร์</a> ·
        <a href="/about.html">เกี่ยวกับเรา</a> ·
        <a href="/contact.html">ติดต่อ</a> ·
        <a href="https://web.facebook.com/clickandgothailand" target="_blank" rel="nofollow noopener">Facebook</a>
      </div>
    </div>
  </footer>

  <!-- ====== Scripts ====== -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/th.js"></script>

  <script>
    // ------------------ Datepickers ------------------
    const ci = document.getElementById('ci');
    const co = document.getElementById('co');

    const today = new Date();
    const tomorrow = new Date(today.getTime() + 86400000);

    const fpIn = flatpickr(ci, {
      dateFormat: 'Y-m-d',
      minDate: today,
      defaultDate: today,
      locale: 'th',
      onChange: (sel) => {
        const minCo = new Date(sel[0].getTime() + 86400000);
        fpOut.set('minDate', minCo);
        if (!fpOut.selectedDates.length || fpOut.selectedDates[0] <= minCo) {
          fpOut.setDate(minCo, true);
        }
      }
    });

    const fpOut = flatpickr(co, {
      dateFormat: 'Y-m-d',
      minDate: tomorrow,
      defaultDate: tomorrow,
      locale: 'th'
    });

    // ------------------ Guests modal (simple) ------------------
    const guestBtn = document.getElementById('guestBtn');
    const roomsEl = document.getElementById('rooms');
    const adultsEl = document.getElementById('adults');
    const childrenEl = document.getElementById('children');

    const back = document.createElement('div');
    back.className = 'modal-backdrop';
    const modal = document.createElement('div');
    modal.className = 'modal';
    modal.innerHTML = `
      <div class="modal-header">
        <strong>ผู้เข้าพัก</strong>
        <button class="btn" id="btnCloseX">ปิด</button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div>ห้อง</div>
          <div class="counter">
            <button class="btn" data-type="rooms" data-op="-">-</button>
            <span id="roomsVal">1</span>
            <button class="btn" data-type="rooms" data-op="+">+</button>
          </div>
        </div>
        <div class="row">
          <div>ผู้ใหญ่</div>
          <div class="counter">
            <button class="btn" data-type="adults" data-op="-">-</button>
            <span id="adultsVal">2</span>
            <button class="btn" data-type="adults" data-op="+">+</button>
          </div>
        </div>
        <div class="row">
          <div>เด็ก</div>
          <div class="counter">
            <button class="btn" data-type="children" data-op="-">-</button>
            <span id="childrenVal">0</span>
            <button class="btn" data-type="children" data-op="+">+</button>
          </div>
        </div>
        <div style="text-align:right;margin-top:12px">
          <button class="btn btn-prim" id="btnDoneGuest">เสร็จสิ้น</button>
        </div>
      </div>
    `;
    document.body.append(back, modal);

    function openGuest() { back.style.display = 'block'; modal.style.display = 'block'; }
    function closeGuest(){ back.style.display = 'none'; modal.style.display = 'none'; }

    guestBtn.addEventListener('click', openGuest);
    back.addEventListener('click', closeGuest);
    modal.querySelector('#btnCloseX').addEventListener('click', closeGuest);

    modal.addEventListener('click', (e) => {
      const t = e.target;
      if (t.matches('button[data-type]')) {
        const type = t.getAttribute('data-type');
        const op = t.getAttribute('data-op');
        const valEl = modal.querySelector('#' + type + 'Val');
        let v = parseInt(valEl.textContent || '0', 10);
        v = op === '+' ? v + 1 : v - 1;
        if (type === 'rooms') v = Math.min(Math.max(v, 1), 8);
        if (type === 'adults') v = Math.min(Math.max(v, 1), 16);
        if (type === 'children') v = Math.min(Math.max(v, 0), 8);
        valEl.textContent = v;
      }
    });

    modal.querySelector('#btnDoneGuest').addEventListener('click', () => {
      const r = parseInt(modal.querySelector('#roomsVal').textContent, 10);
      const a = parseInt(modal.querySelector('#adultsVal').textContent, 10);
      const c = parseInt(modal.querySelector('#childrenVal').textContent, 10);
      roomsEl.value = r; adultsEl.value = a; childrenEl.value = c;
      guestBtn.textContent = `${r} ห้อง, ${a} ผู้ใหญ่, ${c} เด็ก`;
      closeGuest();
    });

    // ------------------ Autocomplete (ใช้ /api/suggest.js) ------------------
    const dest = document.getElementById('dest');
    const panel = document.getElementById('suggestPanel');
    const cityIdHidden = document.getElementById('cityId');

    let timer = null;
    let lastQ = '';

    function showPanel(items) {
      if (!items || !items.length) { panel.style.display = 'none'; panel.innerHTML=''; return; }
      panel.innerHTML = items.map(it => `
        <div class="suggest-item" role="option" data-id="${it.id}" data-city="${(it.label||it.city||'').replace(/"/g,'&quot;')}">
          <div>
            <div class="suggest-title">${it.label || it.city}</div>
            <div class="suggest-sub">${it.subtitle || it.country || ''}</div>
          </div>
          <div class="suggest-sub">${it.id}</div>
        </div>
      `).join('');
      panel.style.display = 'block';
    }

    async function fetchSuggest(q) {
      const url = `/api/suggest.js?q=${encodeURIComponent(q)}&lang=th-th`;
      try {
        const res = await fetch(url, { headers: { 'Cache-Control': 'no-store' } });
        const data = await res.json();
        return (data && data.items) ? data.items : [];
      } catch (e) { return []; }
    }

    dest.addEventListener('input', () => {
      cityIdHidden.value = '';   // เคลียร์ cityId ถ้าผู้ใช้พิมพ์ต่อ
      const q = dest.value.trim();
      if (q.length < 2) { panel.style.display='none'; panel.innerHTML=''; return; }
      if (q === lastQ) return;
      lastQ = q;
      clearTimeout(timer);
      timer = setTimeout(async () => {
        const items = await fetchSuggest(q);
        showPanel(items);
      }, 200);
    });

    panel.addEventListener('click', (e) => {
      const item = e.target.closest('.suggest-item');
      if (!item) return;
      const name = item.getAttribute('data-city') || '';
      const id = item.getAttribute('data-id') || '';
      dest.value = name;
      cityIdHidden.value = id;
      panel.style.display = 'none';
    });

    document.addEventListener('click', (e) => {
      if (!panel.contains(e.target) && e.target !== dest) {
        panel.style.display = 'none';
      }
    });

    // ------------------ ตรวจสอบก่อน submit ------------------
    document.getElementById('cgForm').addEventListener('submit', (e) => {
      // ถ้าไม่มี cityId ให้ส่งชื่อเมืองใน q เผื่อกรณีผู้ใช้ไม่กดเลือกจากรายการ
      if (!cityIdHidden.value) {
        // ฝั่ง /api/search.js จะใช้ q ช่วย fallback
        const qName = dest.value.trim();
        if (qName) {
          // เพิ่มพารามิเตอร์ q โดย dynamic
          const form = e.target;
          const qHidden = document.createElement('input');
          qHidden.type = 'hidden';
          qHidden.name = 'q';
          qHidden.value = qName;
          form.appendChild(qHidden);
        }
      }
    });
  </script>
</body>
</html>
