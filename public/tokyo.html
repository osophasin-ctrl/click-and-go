<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>โตเกียว (Tokyo) – 30 โรงแรมคัดสรร Top Rating + Best Value | Click & Go</title>
  <meta name="description" content="รวม 30 โรงแรมในโตเกียวที่คัดสรรโดย Click & Go จากคะแนนรีวิวสูงและคุ้มค่า (Top rating + Best value) เลือกโรงแรมที่ใช่แล้วคลิกจองได้ทันที">
  <link rel="canonical" href="https://click-and-go-navy.vercel.app/tokyo.html" />
  <link rel="icon" href="favicon.ico" />
  <link rel="stylesheet" href="style.css" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Click & Go" />
  <meta property="og:title" content="โตเกียว (Tokyo) – 30 โรงแรมคัดสรร Top Rating + Best Value" />
  <meta property="og:description" content="เลือกจาก 30 โรงแรมที่คะแนนรีวิวสูงและคุ้มค่าในโตเกียว คลิกเดียวไปจองได้เลย" />
  <meta property="og:url" content="https://click-and-go-navy.vercel.app/tokyo.html" />
  <meta property="og:image" content="https://click-and-go-navy.vercel.app/tokyo-hero.jpg" />

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-1QR2EGFWN3"></script>
  <script>
    window.dataLayer=window.dataLayer||[];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date()); gtag('config', 'G-1QR2EGFWN3');
  </script>

  <!-- JSON-LD: ItemList (เติมตอนเรนเดอร์) -->
  <script id="ldjson" type="application/ld+json"></script>
</head>
<body>
  <!-- Header -->
  <header class="site-header" role="banner">
    <div class="inner">
      <a href="index.html" class="brand" aria-label="Click & Go">
        <img src="logo.png" alt="Click & Go" width="40" height="40" loading="lazy" />
      </a>
      <nav class="main-nav" aria-label="เมนูหลัก">
        <a href="index.html">หน้าแรก</a>
        <a href="deals.html">โปรโมชั่น</a>
        <div class="lang">
          <button class="lang-btn" aria-haspopup="true" aria-expanded="false">ภาษา ▾</button>
          <div class="lang-menu" role="menu">
            <a role="menuitem" href="#" aria-current="true">ไทย</a>
            <a role="menuitem" href="en/index.html">English</a>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- Hero -->
    <section class="hero-city" style="background-image:url('tokyo-hero.jpg')">
      <div class="overlay" aria-hidden="true"></div>
      <div class="content">
        <nav class="breadcrumb" aria-label="breadcrumb">
          <a href="index.html">หน้าหลัก</a> › <span>โตเกียว</span>
        </nav>
        <h1>โตเกียว (Tokyo)</h1>
        <p>มหานครที่ไม่เคยหลับไหล อาหารอร่อย แหล่งช้อปปิ้งเพียบ — เลือกจาก 30 โรงแรมคัดสรรของเรา คลิกเดียวไปจองได้ทันที</p>
      </div>
    </section>

    <!-- Intro / Must-do -->
    <section class="section" id="tokyo-intro">
      <h2 class="section-title">แนะนำโตเกียวแบบสั้น ๆ</h2>
      <div class="widget-like solid">
        <p class="muted" id="intro-1">โตเกียวเป็นเมืองที่ผสมผสานความทันสมัยและวัฒนธรรมดั้งเดิมได้อย่างลงตัว เดินทางสะดวกด้วยรถไฟ ครบทั้งช้อป ชิม และชมแลนด์มาร์ก</p>
        <p class="muted" id="intro-2">ช่วงน่าเที่ยว: มี.ค.–พ.ค. (ซากุระ) และ ต.ค.–ธ.ค. (อากาศเย็นสบาย) เหมาะทั้งคู่รัก ครอบครัว และสายกิน</p>
        <div class="highlight-list" id="must-do">
          <!-- จะเติมรายการจาก JSON -->
        </div>
      </div>
    </section>

    <!-- 30 Picks -->
    <section class="section" id="picks">
      <h2 class="section-title">
        30 โรงแรมในโตเกียวที่เราคัดสรร จาก <span class="badge">Top rating</span> + <span class="badge">Best value</span>
      </h2>
      <p class="muted" style="margin:-8px 0 14px">
        เกณฑ์คัดเลือก: คะแนนรีวิวสูง (≥ 8 โดยอ้างอิงจากผลลัพธ์การค้นหา) + ราคา/ความคุ้มค่าโดยรวม
      </p>

      <div class="deal-grid" id="hotel-grid" aria-live="polite">
        <!-- การ์ดโรงแรม 30 ใบจะถูกเรนเดอร์จาก JSON -->
      </div>

      <p class="tiny-note" style="margin-top:12px">
        * ลิงก์ “ดูดีล/จอง” เป็นลิงก์พันธมิตร (affiliate) อาจมีการเก็บค่าคอมมิชชั่น โดยไม่เพิ่มราคาให้ผู้ใช้
      </p>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container" style="text-align:center">
      <div class="footer-links">
        <a href="privacy.html">Privacy</a> · 
        <a href="terms.html">Terms</a> · 
        <a href="affiliate.html">Affiliate Disclosure</a> · 
        <a href="about.html">About us</a> · 
        <a href="contact.html">Contact</a> ·
        <a href="https://web.facebook.com/clickandgothailand" target="_blank" rel="nofollow noopener">Facebook</a>
      </div>
    </div>
  </footer>

  <!-- Page Script -->
  <script>
    // ── language pop-up
    (function(){
      const btn=document.querySelector('.lang-btn'); const menu=document.querySelector('.lang-menu');
      if(!btn||!menu) return;
      const close=()=>{menu.classList.remove('open');btn.setAttribute('aria-expanded','false');};
      btn.addEventListener('click',e=>{e.stopPropagation();const opened=menu.classList.toggle('open');btn.setAttribute('aria-expanded',String(opened));});
      document.addEventListener('click',close); document.addEventListener('keydown',e=>{if(e.key==='Escape') close();});
    })();

    // ── small helpers
    const fmtPrice = (txt)=> txt || '';
    const el = (sel)=> document.querySelector(sel);
    const grid = ()=> el('#hotel-grid');

    // ── render Must-do (from JSON)
    function renderMustDo(list){
      const root = document.getElementById('must-do');
      if(!list || !root) return;
      root.innerHTML = `
        <ul class="bullets">
          ${list.map(i => `<li><strong>${i.title}</strong> — ${i.desc}${i.tip ? ` <em class="muted">Tip: ${i.tip}</em>`:''}</li>`).join('')}
        </ul>`;
    }

    // ── render one hotel card
    function hotelCard(h){
      const tags = (h.tags||[]).slice(0,3).map(t=>`<span class="tag">${t}</span>`).join('');
      const bullets = (h.highlights||[]).slice(0,3).map(b=>`<li>${b}</li>`).join('');
      return `
        <article class="deal-card" data-rating="${h.rating||''}">
          <img class="thumb" src="${h.image}" alt="${h.name}" loading="lazy" width="640" height="400">
          <div class="body">
            <h3>${h.name}</h3>
            <p>⭐ ${h.rating ?? '-'} <span class="sep">·</span> ${h.area || ''} ${tags ? `<span class="sep">·</span> ${tags}`:''}</p>
            <ul class="mini">${bullets}</ul>
          </div>
          <div class="meta">
            <strong>${fmtPrice(h.price_hint)}</strong>
            <a class="btn" href="${h.affiliate_url}" target="_blank" rel="nofollow noopener">ดูดีล / จอง</a>
          </div>
        </article>
      `;
    }

    // ── JSON-LD ItemList for SEO
    function injectItemListJsonLD(city, hotels){
      try{
        const data = {
          "@context":"https://schema.org",
          "@type":"ItemList",
          "name": `Top 30 Hotels in ${city} by Click & Go`,
          "itemListOrder": "http://schema.org/ItemListOrderDescending",
          "numberOfItems": hotels.length,
          "itemListElement": hotels.map((h, idx)=>({
            "@type":"ListItem",
            "position": idx+1,
            "name": h.name,
            "url": h.affiliate_url
          }))
        };
        document.getElementById('ldjson').textContent = JSON.stringify(data);
      }catch(e){}
    }

    // ── load data
    (async function(){
      try{
        const res = await fetch('hotel-index/tokyo.json',{cache:'no-cache'});
        const data = await res.json();

        // Set intro
        if(Array.isArray(data.intro_paragraphs)){
          document.getElementById('intro-1').textContent = data.intro_paragraphs[0] || document.getElementById('intro-1').textContent;
          document.getElementById('intro-2').textContent = data.intro_paragraphs[1] || document.getElementById('intro-2').textContent;
        }
        renderMustDo(data.must_do || []);

        // Render hotels (expect 30)
        const list = (data.hotels||[]).slice(0, 30);
        grid().innerHTML = list.map(hotelCard).join('');

        // Analytics helper events
        grid().addEventListener('click', (e)=>{
          const a = e.target.closest('a.btn');
          if(!a) return;
          const card = e.target.closest('.deal-card');
          gtag('event','hotel_click',{
            event_category:'city_tokyo',
            event_label: a.href,
            value: card ? Number(card.getAttribute('data-rating')||0) : undefined
          });
        });

        injectItemListJsonLD('Tokyo', list);
      }catch(err){
        grid().innerHTML = `<p class="muted">ขออภัย โหลดรายการโรงแรมไม่สำเร็จ กรุณารีเฟรชอีกครั้ง</p>`;
      }
    })();
  </script>
</body>
</html>
