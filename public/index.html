<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Click & Go – เปรียบเทียบราคาโรงแรม จองง่ายในคลิกเดียว</title>
  <meta name="description" content="Click & Go ช่วยค้นหาและเปรียบเทียบราคาโรงแรมจากหลาย OTA พร้อมลิงก์ไปจองทันที ครอบคลุมปลายทางยอดนิยมทั้งในไทยและต่างประเทศ" />
  <link rel="icon" href="favicon.ico" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/material_green.css">
  <style>
    /* ====== เฉพาะส่วนที่เกี่ยวกับบล็อกค้นหา ====== */
    .mock-wrap{ max-width:1030px; width:100%; margin:0 auto; }
    .mock-box{ width:100%; background:#fff; border:1px solid #e5e7eb; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,.08); padding:16px; display:flex; flex-direction:column; justify-content:center; }
    .mock-title{ margin:0 0 6px; font-weight:800; font-size:22px; }
    .mock-sub{ margin:0 0 12px; color:#666; }

    /* แถวอินพุต 2 กล่อง (เมือง + ปุ่มโรงแรม) ให้อยู่บรรทัดเดียว */
    .mock-row{ display:grid; gap:10px; align-items:center; grid-template-columns:1fr 1fr; }
    .full-row{ grid-column:1 / -1; }

    .mock-input, .guest-input, .mock-btn{ height:44px; border:1px solid #d7d7d7; border-radius:8px; padding:0 12px; background:#fff; font-size:15px; }
    .mock-input{ width:100%; }
    .guest-input{ text-align:left; cursor:pointer; }
    .mock-btn{ background:#0ea5a0; color:#fff; border:0; cursor:pointer; font-weight:700; }
    .mock-btn:active{ transform:translateY(1px); }
    .btn-wide{ width:100%; }

    /* ปุ่ม “ค้นหาจากชื่อโรงแรม” ให้หน้าตากลมกลืนกับอินพุต */
    .hotel-btn {
      height:44px; border:1px solid #d7d7d7; border-radius:8px;
      display:flex; align-items:center; justify-content:center;
      background:#f9fafb; font-size:15px; color:#111; text-decoration:none;
      transition:background .15s ease,border-color .15s ease;
    }
    .hotel-btn:hover { background:#f3f4f6; border-color:#cfd4d9; }

    .field{ position:relative; }
    .field-label{ position:absolute; left:12px; top:6px; font-size:12px; color:#6b7280; pointer-events:none; }
    .has-label .mock-input,.has-label .flatpickr-input{ height:56px; padding-top:18px; }

    /* Suggestion (สำหรับเมือง) */
    .suggest-wrap{ position:relative; }
    .suggest-panel{
      position:absolute; left:0; right:0; top:calc(100% + 4px);
      background:#fff; border:1px solid #ddd; border-radius:10px;
      box-shadow:0 8px 20px rgba(0,0,0,.08); max-height:260px; overflow:auto;
      z-index: 9999; display:none;
    }
    .suggest-item{ padding:10px 12px; cursor:pointer; display:flex; justify-content:space-between; align-items:center; gap:10px; }
    .suggest-item:hover{ background:#f6f6f6; }
    .s-label{ font-weight:600; } .s-sub{ color:#777; font-size:13px; }

    @media (max-width:640px){ .mock-row{ grid-template-columns:1fr; } }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="inner">
      <a href="index.html" class="brand">
        <img src="logo.png" alt="" width="40" height="40"/><span class="brand-text">Click & Go</span>
      </a>
      <nav class="main-nav">
        <a href="index.html" aria-current="page">หน้าแรก</a>
        <a href="deals.html">โปรโมชั่น</a>
        <div class="lang">
          <button class="lang-btn">ภาษา ▾</button>
          <div class="lang-menu"><a href="#" aria-current="true">ไทย</a><a href="/en/index.html">English</a></div>
        </div>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero"><img class="hero-img" src="hero-bg.jpg" alt="Click & Go Thailand"></section>

    <section style="margin:24px 0">
      <h2 class="section-title">ค้นหาโรงแรม</h2>
      <div class="mock-wrap"><div class="mock-box">
        <h3 class="mock-title">ค้นหาดีลที่ใช่สำหรับคุณ</h3>
        <p class="mock-sub">พิมพ์ชื่อเมือง เลือกวันที่ ระบุผู้เข้าพัก แล้วกดค้นหา<br>หรือกด “ค้นหาจากชื่อโรงแรม” เพื่อไปหน้าค้นหาโรงแรมโดยเฉพาะ</p>

        <form id="cgForm" class="mock-row" method="GET" action="search.html" autocomplete="off">
          <!-- กล่องเมือง (autocomplete) -->
          <div class="suggest-wrap">
            <input type="text" id="dest" name="q" class="mock-input" placeholder="พิมพ์ชื่อเมือง..." aria-label="ปลายทาง (เมือง)">
            <div id="suggestPanel" class="suggest-panel" role="listbox" aria-label="คำแนะนำ"></div>
          </div>

          <!-- ปุ่มไปหน้าค้นหาโรงแรมด้วยชื่อ -->
          <a id="hotelSearchBtn" href="hotel-search.html" class="hotel-btn" aria-label="ค้นหาจากชื่อโรงแรม">ค้นหาจากชื่อโรงแรม</a>

          <!-- วันที่ + ผู้เข้าพัก -->
          <div class="field has-label full-row">
            <span class="field-label">เช็คอิน</span><input type="text" id="ci" name="checkin" class="mock-input" readonly>
          </div>
          <div class="field has-label">
            <span class="field-label">เช็คเอาท์</span><input type="text" id="co" name="checkout" class="mock-input" readonly>
          </div>
          <button type="button" id="guestBtn" class="guest-input">1 ห้อง, 2 ผู้ใหญ่, 0 เด็ก</button>

          <button type="submit" class="mock-btn btn-wide full-row">ค้นหา</button>

          <!-- ซ่อนสำหรับ submit ไป search.html -->
          <input type="hidden" id="rooms"   name="rooms"   value="1">
          <input type="hidden" id="adults"  name="adults"  value="2">
          <input type="hidden" id="children"name="children"value="0">
          <input type="hidden"              name="lang"    value="th-th">
          <input type="hidden" id="cityId"  name="cityId"  value="">
        </form>
      </div></div>
    </section>

    <!-- (ส่วนอื่น ๆ ของหน้า: เมืองยอดนิยม/ฟีเจอร์ ฯลฯ — คงเดิมเหมือนของเดิม) -->
    <section>
      <h2 class="section-title">ปลายทางยอดนิยมในไทย</h2>
      <div class="city-grid">
        <a class="city-card" href="#" data-q="กรุงเทพฯ"><figure><img src="bangkok-tile.webp" alt="กรุงเทพฯ"><figcaption>กรุงเทพฯ</figcaption></figure></a>
        <a class="city-card" href="#" data-q="เชียงใหม่"><figure><img src="chiangmai-tile.webp" alt="เชียงใหม่"><figcaption>เชียงใหม่</figcaption></figure></a>
        <a class="city-card" href="#" data-q="พัทยา"><figure><img src="pattaya-tile.webp" alt="พัทยา"><figcaption>พัทยา</figcaption></figure></a>
        <a class="city-card" href="#" data-q="ภูเก็ต"><figure><img src="phuket-tile.webp" alt="ภูเก็ต"><figcaption>ภูเก็ต</figcaption></figure></a>
        <a class="city-card" href="#" data-q="กระบี่"><figure><img src="krabi-tile.webp" alt="กระบี่"><figcaption>กระบี่</figcaption></figure></a>
        <a class="city-card" href="#" data-q="หัวหิน"><figure><img src="huahin-tile.webp" alt="หัวหิน"><figcaption>หัวหิน</figcaption></figure></a>
      </div>
    </section>
  </main>

  <!-- ====== Modal ผู้เข้าพัก (เดิม) ====== -->
  <div id="guestBackdrop" class="modal-backdrop" aria-hidden="true" style="display:none"></div>
  <div id="guestModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="guestTitle" style="display:none">
    <div class="modal-header"><div id="guestTitle" class="modal-title">ผู้เข้าพัก</div><button type="button" class="btn-outline" id="btnCloseX">×</button></div>
    <div class="modal-body">
      <div class="row-ctrl"><div class="label-wrap"><strong>ห้อง</strong><small>จำนวนห้องพัก</small></div>
        <div class="counter"><button class="btn-ctrl" data-type="rooms" data-op="minus">−</button><span class="count" id="roomsCount">1</span><button class="btn-ctrl" data-type="rooms" data-op="plus">+</button></div></div>
      <div class="row-ctrl"><div class="label-wrap"><strong>ผู้ใหญ่</strong><small>อายุ 18 ปีขึ้นไป</small></div>
        <div class="counter"><button class="btn-ctrl" data-type="adults" data-op="minus">−</button><span class="count" id="adultsCount">2</span><button class="btn-ctrl" data-type="adults" data-op="plus">+</button></div></div>
      <div class="row-ctrl"><div class="label-wrap"><strong>เด็ก</strong><small>อายุ 0–17 ปี</small></div>
        <div class="counter"><button class="btn-ctrl" data-type="children" data-op="minus">−</button><span class="count" id="childrenCount">0</span><button class="btn-ctrl" data-type="children" data-op="plus">+</button></div></div>
    </div>
    <div class="modal-footer"><button class="btn-outline" id="btnCancel">ยกเลิก</button><button class="btn-primary" id="btnSaveGuests">บันทึก</button></div>
  </div>

  <footer class="site-footer"><div class="container" style="text-align:center">
    <div class="footer-links">
      <a href="privacy.html">Privacy</a> · <a href="terms.html">Terms</a> ·
      <a href="affiliate.html">Affiliate Disclosure</a> · <a href="about.html">About us</a> ·
      <a href="contact.html">Contact</a> · <a href="https://web.facebook.com/clickandgothailand" target="_blank" rel="nofollow noopener">Facebook</a>
    </div></div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/th.js"></script>

  <script>
  // เมนูภาษา (คงเดิม)
  (function(){
    const btn=document.querySelector('.lang-btn'),menu=document.querySelector('.lang-menu');
    if(!btn||!menu) return;
    function closeM(){menu.classList.remove('open');btn.setAttribute('aria-expanded','false');}
    btn.addEventListener('click',e=>{e.stopPropagation();const o=menu.classList.toggle('open');btn.setAttribute('aria-expanded',String(o));});
    document.addEventListener('click',closeM);
    document.addEventListener('keydown',e=>{if(e.key==='Escape') closeM();});
  })();
  </script>

  <!-- ===== Autocomplete เมือง + ปุ่มไป hotel-search ===== -->
  <script>
  (function(){
    const input   = document.getElementById('dest');
    const panel   = document.getElementById('suggestPanel');
    const cityId  = document.getElementById('cityId');
    const hotelBtn= document.getElementById('hotelSearchBtn');

    if(!input||!panel||!hotelBtn) return;

    // ปุ่ม "ค้นหาจากชื่อโรงแรม" -> ส่งต่อพารามิเตอร์วันที่/ผู้เข้าพัก/ภาษา
    function buildHotelSearchUrl(){
      const ci = document.getElementById('ci').value || '';
      const co = document.getElementById('co').value || '';
      const rooms = document.getElementById('rooms').value || 1;
      const adults= document.getElementById('adults').value || 2;
      const children=document.getElementById('children').value || 0;
      const sp = new URLSearchParams({checkin:ci, checkout:co, rooms, adults, children, lang:'th-th'});
      return 'hotel-search.html?'+sp.toString();
    }
    hotelBtn.addEventListener('click', (e)=>{ e.preventDefault(); location.href = buildHotelSearchUrl(); });

    const esc = s => (s||'').replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    const show=()=>panel.style.display='block';
    const hide=()=>{ panel.style.display='none'; panel.innerHTML=''; };

    function rowCity(it){
      return `<div class="suggest-item" data-id="${esc(it.city_id)}" data-label="${esc(it.label)}">
        <div><div class="s-label">${esc(it.label)}</div><div class="s-sub">เมือง</div></div>
      </div>`;
    }
    function bind(){
      panel.querySelectorAll('.suggest-item').forEach(el=>{
        el.addEventListener('mousedown',ev=>{
          ev.preventDefault();
          const id=el.getAttribute('data-id'), lbl=el.getAttribute('data-label')||'';
          input.value=lbl; cityId.value=id; hide();
        });
      });
    }
    let timer=null, aborter=null;
    async function j(url, signal){
      const r = await fetch(url, { signal, cache:'no-store' });
      if(!r.ok) throw new Error('HTTP '+r.status);
      return r.json();
    }
    async function doSuggest(){
      const q=(input.value||'').trim();
      cityId.value='';
      if(timer) clearTimeout(timer);
      if(!q){ hide(); return; }
      panel.innerHTML = `<div class="suggest-item"><div class="s-sub">กำลังค้นหา...</div></div>`;
      show();
      timer=setTimeout(async ()=>{
        aborter?.abort(); aborter=new AbortController();
        const u=encodeURIComponent(q);
        try{
          const data = await j(`/api/city-suggest?q=${u}&lang=th-th&limit=30`, aborter.signal);
          const items = (data && data.ok && Array.isArray(data.items)) ? data.items : [];
          panel.innerHTML = items.length
            ? items.map(rowCity).join('')
            : `<div class="suggest-item"><div class="s-label">ไม่พบคำแนะนำ</div><div class="s-sub">ลองพิมพ์ให้ยาวขึ้น</div></div>`;
          show(); bind();
        }catch(_){ hide(); }
      }, 200);
    }
    input.addEventListener('input', doSuggest);
    document.addEventListener('click',e=>{ if(!panel.contains(e.target) && e.target!==input) hide(); });
  })();
  </script>

  <script>
  // วันที่ + ผู้เข้าพัก + ส่งฟอร์ม (เหมือนเดิม)
  (function(){
    const ONE=86400000,
          ci=document.getElementById('ci'),
          co=document.getElementById('co');
    const fmtLocal=(d)=>{const p=n=>String(n).padStart(2,'0');return d.getFullYear()+'-'+p(d.getMonth()+1)+'-'+p(d.getDate());};
    const today=new Date(),tom=new Date(Date.now()+ONE);
    let inP=null,outP=null;

    if(window.flatpickr){
      inP=flatpickr("#ci",{locale:'th',dateFormat:"Y-m-d",altInput:true,altFormat:"j M Y",altInputClass:"mock-input",allowInput:false,minDate:"today",
        onChange(d){if(d[0]){const n=new Date(d[0].getTime()+ONE);outP.set('minDate',n);if(!outP.selectedDates[0]||outP.selectedDates[0]<=d[0])outP.setDate(n,true);}}
      });
      outP=flatpickr("#co",{locale:'th',dateFormat:"Y-m-d",altInput:true,altFormat:"j M Y",altInputClass:"mock-input",allowInput:false,minDate:tom});
      inP.setDate(today,true); outP.setDate(tom,true);
    }else{
      ci.removeAttribute('readonly'); co.removeAttribute('readonly');
      ci.type='date'; co.type='date';
      ci.value=fmtLocal(today); ci.min=fmtLocal(today);
      co.value=fmtLocal(tom);   co.min=fmtLocal(tom);
      ci.addEventListener('change',()=>{const a=new Date(ci.value||fmtLocal(today)),n=new Date(a.getTime()+ONE);if(!co.value||new Date(co.value)<=a){co.value=fmtLocal(n);co.min=fmtLocal(n);}});
    }

    let rooms=1,adults=2,children=0;
    const btn=document.getElementById('guestBtn'),
          roomsC=document.getElementById('roomsCount'),
          adultsC=document.getElementById('adultsCount'),
          childrenC=document.getElementById('childrenCount'),
          hR=document.getElementById('rooms'),
          hA=document.getElementById('adults'),
          hC=document.getElementById('children'),
          modal=document.getElementById('guestModal'),
          backdrop=document.getElementById('guestBackdrop');
    function open(){roomsC.textContent=rooms;adultsC.textContent=adults;childrenC.textContent=children;modal.style.display='block';backdrop.style.display='block';}
    function close(){modal.style.display='none';backdrop.style.display='none';}
    function upd(){btn.textContent=`${rooms} ห้อง, ${adults} ผู้ใหญ่, ${children} เด็ก`; }
    upd();
    btn.addEventListener('click',open);
    document.getElementById('btnCloseX').addEventListener('click',close);
    document.getElementById('btnCancel').addEventListener('click',close);
    backdrop.addEventListener('click',close);
    document.querySelectorAll('.btn-ctrl').forEach(b=>{
      b.addEventListener('click',()=>{
        const t=b.getAttribute('data-type'),op=b.getAttribute('data-op');
        let v=0,min=0,max=10;
        if(t==='rooms'){v=rooms;min=1}
        if(t==='adults'){v=adults;min=1}
        if(t==='children'){v=children;min=0}
        if(op==='plus'&&v<max)v++; if(op==='minus'&&v>min)v--;
        if(t==='rooms'){rooms=v;roomsC.textContent=v}
        if(t==='adults'){adults=v;adultsC.textContent=v}
        if(t==='children'){children=v;childrenC.textContent=v}
      });
    });
    document.getElementById('btnSaveGuests').addEventListener('click',()=>{hR.value=rooms;hA.value=adults;hC.value=children;upd();close();});

    // ส่งฟอร์ม: normalize กรุงเทพฯ/กรุงเทพมหานคร -> กรุงเทพ
    document.getElementById('cgForm').addEventListener('submit',e=>{
      const q=document.getElementById('dest');
      let v=(q.value||'').trim();
      if(!v) v='กรุงเทพ';
      v=v.replace(/กรุงเทพมหานคร/g,'กรุงเทพ').replace(/กรุงเทพฯ/g,'กรุงเทพ');
      q.value=v;
    });

    // การ์ดเมืองยอดนิยม -> ไป search.html พร้อมค่าปัจจุบัน
    function fmtLocalStr(d){const p=n=>String(n).padStart(2,'0');return d.getFullYear()+'-'+p(d.getMonth()+1)+'-'+p(d.getDate());}
    document.querySelectorAll('.city-card[data-q]').forEach(a=>{
      a.addEventListener('click',ev=>{
        ev.preventDefault();
        let q=a.getAttribute('data-q')||'';
        q=q.replace(/กรุงเทพมหานคร/g,'กรุงเทพ').replace(/กรุงเทพฯ/g,'กรุงเทพ');

        const inP=window.flatpickr && document.querySelector('#ci')._flatpickr;
        const outP=window.flatpickr && document.querySelector('#co')._flatpickr;
        let ci = inP && inP.selectedDates[0] ? inP.formatDate(inP.selectedDates[0],'Y-m-d') : fmtLocalStr(new Date());
        let co = outP && outP.selectedDates[0] ? outP.formatDate(outP.selectedDates[0],'Y-m-d') : fmtLocalStr(new Date(Date.now()+86400000));

        const ciD=new Date(ci+'T00:00:00'), coD=new Date(co+'T00:00:00');
        if(coD<=ciD) co=fmtLocalStr(new Date(ciD.getTime()+86400000));

        const rooms=document.getElementById('rooms').value||1;
        const adults=document.getElementById('adults').value||2;
        const children=document.getElementById('children').value||0;

        const sp=new URLSearchParams({q,checkin:ci,checkout:co,rooms,adults,children,lang:'th-th'});
        location.href='search.html?'+sp.toString();
      });
    });
  })();
  </script>
</body>
</html>
